{
  "version": 3,
  "sources": [
    "@uirouter/angular/directives/uiView.ts"
  ],
  "names": [],
  "mappings": "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",
  "file": "uiView.js",
  "sourceRoot": "",
  "sourcesContent": [
    "/** @ng2api @module directives */\n/** */\nimport {\n  Component, ComponentFactoryResolver, ViewContainerRef, Input, ComponentRef, Type, ReflectiveInjector, ViewChild,\n  Injector, Inject, ComponentFactory\n} from '@angular/core';\n\nimport {\n  UIRouter, isFunction, Transition, parse, TransitionHookFn, StateDeclaration, inArray, trace, ViewContext, ViewConfig,\n  ActiveUIView, ResolveContext, NATIVE_INJECTOR_TOKEN, flattenR\n} from '@uirouter/core';\nimport { Ng2ViewConfig } from '../statebuilders/views';\nimport { MergeInjector } from '../mergeInjector';\n\n/** @hidden */\nlet id = 0;\n\n/** @internalapi These are provide()d as the string UIView.PARENT_INJECT */\nexport interface ParentUIViewInject {\n  context: ViewContext;\n  fqn: string;\n}\n\n/** @internalapi */\ninterface InputMapping {\n  token: string;\n  prop: string;\n}\n\n/**\n * Given a component class, gets the inputs of styles:\n *\n * - @Input('foo') _foo\n * - `inputs: ['foo']`\n *\n * @internalapi\n */\nconst ng2ComponentInputs = (factory: ComponentFactory<any>): InputMapping[] => {\n  return factory.inputs.map(input => ({ prop: input.propName, token: input.templateName }));\n};\n\n/**\n * A UI-Router viewport directive, which is filled in by a view (component) on a state.\n *\n * ### Selector\n *\n * A `ui-view` directive can be created as an element: `<ui-view></ui-view>` or as an attribute: `<div ui-view></div>`.\n *\n * ### Purpose\n *\n * This directive is used in a Component template (or as the root component) to create a viewport.  The viewport\n * is filled in by a view (as defined by a [[Ng2ViewDeclaration]] inside a [[Ng2StateDeclaration]]) when the view's\n * state has been activated.\n *\n * #### Example:\n * ```js\n * // This app has two states, 'foo' and 'bar'\n * stateRegistry.register({ name: 'foo', url: '/foo', component: FooComponent });\n * stateRegistry.register({ name: 'bar', url: '/bar', component: BarComponent });\n * ```\n * ```html\n * <!-- This ui-view will be filled in by the foo state's component or\n *      the bar state's component when the foo or bar state is activated -->\n * <ui-view></ui-view>\n * ```\n *\n * ### Named ui-views\n *\n * A `ui-view` may optionally be given a name via the attribute value: `<div ui-view='header'></div>`.  *Note:\n * an unnamed `ui-view` is internally named `$default`*.   When a `ui-view` has a name, it will be filled in\n * by a matching named view.\n *\n * #### Example:\n * ```js\n * stateRegistry.register({\n *   name: 'foo',\n *   url: '/foo',\n *   views: { header: HeaderComponent, $default: FooComponent });\n * ```\n * ```html\n * <!-- When 'foo' state is active, filled by HeaderComponent -->\n * <div ui-view=\"header\"></div>\n *\n * <!-- When 'foo' state is active, filled by FooComponent -->\n * <ui-view></ui-view>\n * ```\n */\n\nexport class UIView {\n   componentTarget: ViewContainerRef;\n   name: string;\n   set _name(val: string) { this.name = val; }\n  /** The reference to the component currently inside the viewport */\n  componentRef: ComponentRef<any>;\n  /** Deregisters the ui-view from the view service */\n  deregisterUIView: Function;\n  /** Deregisters the master uiCanExit transition hook */\n  deregisterHook: Function;\n  /** Data about the this UIView */\n  uiViewData: ActiveUIView = <any> {};\n  parent: ParentUIViewInject;\n\n  static PARENT_INJECT = \"UIView.PARENT_INJECT\";\n\n  constructor(\n      public router: UIRouter,\n       parent,\n      public viewContainerRef: ViewContainerRef,\n  ) {\n    this.parent = parent;\n  }\n\n  ngOnInit() {\n    const router = this.router;\n    const parentFqn = this.parent.fqn;\n    const name = this.name || '$default';\n\n    this.uiViewData = {\n      $type: 'ng2',\n      id: id++,\n      name: name,\n      fqn: parentFqn ? parentFqn + \".\" + name : name,\n      creationContext: this.parent.context,\n      configUpdated: this.viewConfigUpdated.bind(this),\n      config: undefined\n    };\n\n    this.deregisterHook = router.transitionService.onBefore({}, trans => this.applyUiCanExitHook(trans));\n    this.deregisterUIView = router.viewService.registerUIView(this.uiViewData);\n  }\n\n  /**\n   * For each transition, checks the component loaded in the ui-view for:\n   *\n   * - has a uiCanExit() component hook\n   * - is being exited\n   *\n   * If both are true, adds the uiCanExit component function as a hook to that singular Transition.\n   */\n  applyUiCanExitHook(trans: Transition) {\n    const instance = this.componentRef && this.componentRef.instance;\n    const uiCanExitFn: TransitionHookFn = instance && instance.uiCanExit;\n\n    if (isFunction(uiCanExitFn)) {\n      const state: StateDeclaration = parse(\"uiViewData.config.viewDecl.$context.self\")(this);\n\n      if (trans.exiting().indexOf(state) !== -1) {\n        trans.onStart({}, function() {\n          return uiCanExitFn.call(instance, trans);\n        });\n      }\n    }\n  }\n\n  disposeLast() {\n    if (this.componentRef) this.componentRef.destroy();\n    this.componentRef = null;\n  }\n\n  ngOnDestroy() {\n    if (this.deregisterUIView) this.deregisterUIView();\n    if (this.deregisterHook) this.deregisterHook();\n    this.disposeLast();\n  }\n\n  /**\n   * The view service is informing us of an updated ViewConfig\n   * (usually because a transition activated some state and its views)\n   */\n  viewConfigUpdated(config: ViewConfig) {\n    // The config may be undefined if there is nothing currently targeting this UIView.\n    // Dispose the current component, if there is one\n    if (!config) return this.disposeLast();\n\n    // Only care about Ng2 configs\n    if (!(config instanceof Ng2ViewConfig)) return;\n\n    // The \"new\" viewconfig is already applied, so exit early\n    if (this.uiViewData.config === config) return;\n\n    // This is a new ViewConfig.  Dispose the previous component\n    this.disposeLast();\n    trace.traceUIViewConfigUpdated(this.uiViewData, config && config.viewDecl.$context);\n\n    this.applyUpdatedConfig(config);\n  }\n\n  applyUpdatedConfig(config: Ng2ViewConfig) {\n    this.uiViewData.config = config;\n    // Create the Injector for the routed component\n    let context = new ResolveContext(config.path);\n    let componentInjector = this.getComponentInjector(context);\n\n    // Get the component class from the view declaration. TODO: allow promises?\n    let componentClass = config.viewDecl.component;\n\n    // Create the component\n    let compFactoryResolver = componentInjector.get(ComponentFactoryResolver);\n    let compFactory = compFactoryResolver.resolveComponentFactory(componentClass);\n    this.componentRef = this.componentTarget.createComponent(compFactory, undefined, componentInjector);\n\n    // Wire resolves to @Input()s\n    this.applyInputBindings(compFactory, this.componentRef, context, componentClass);\n  }\n\n  /**\n   * Creates a new Injector for a routed component.\n   *\n   * Adds resolve values to the Injector\n   * Adds providers from the NgModule for the state\n   * Adds providers from the parent Component in the component tree\n   * Adds a PARENT_INJECT view context object\n   *\n   * @returns an Injector\n   */\n  getComponentInjector(context: ResolveContext): Injector {\n    // Map resolves to \"useValue: providers\"\n    let resolvables = context.getTokens().map(token => context.getResolvable(token)).filter(r => r.resolved);\n    let newProviders = resolvables.map(r => ({ provide: r.token, useValue: r.data }));\n\n    let parentInject = { context: this.uiViewData.config.viewDecl.$context, fqn: this.uiViewData.fqn };\n    newProviders.push({ provide: UIView.PARENT_INJECT, useValue: parentInject });\n\n    let parentComponentInjector = this.viewContainerRef.injector;\n    let moduleInjector = context.getResolvable(NATIVE_INJECTOR_TOKEN).data;\n    let mergedParentInjector = new MergeInjector(moduleInjector, parentComponentInjector);\n\n    return ReflectiveInjector.resolveAndCreate(newProviders, mergedParentInjector);\n  }\n\n  /**\n   * Supplies component inputs with resolve data\n   *\n   * Finds component inputs which match resolves (by name) and sets the input value\n   * to the resolve data.\n   */\n  applyInputBindings(factory: ComponentFactory<any>, ref: ComponentRef<any>, context: ResolveContext, componentClass) {\n    const component = ref.instance;\n    const bindings = this.uiViewData.config.viewDecl['bindings'] || {};\n    const explicitBoundProps = Object.keys(bindings);\n\n    // Returns the actual component property for a renamed an input renamed using `@Input('foo') _foo`.\n    // return the `_foo` property\n    const renamedInputProp = (prop: string) => {\n      const input = factory.inputs.find(i => i.templateName === prop);\n      return input && input.propName || prop;\n    };\n\n    // Supply resolve data to component as specified in the state's `bindings: {}`\n    const explicitInputTuples = explicitBoundProps\n        .reduce((acc, key) => acc.concat([{ prop: renamedInputProp(key), token: bindings[key] }]), []);\n\n    // Supply resolve data to matching @Input('prop') or inputs: ['prop']\n    const implicitInputTuples = ng2ComponentInputs(factory)\n        .filter(tuple => !inArray(explicitBoundProps, tuple.prop));\n\n    const addResolvable = (tuple: InputMapping) => ({\n      prop: tuple.prop,\n      resolvable: context.getResolvable(tuple.token),\n    });\n\n    explicitInputTuples.concat(implicitInputTuples)\n        .map(addResolvable)\n        .filter(tuple => tuple.resolvable && tuple.resolvable.resolved)\n        .forEach(tuple => { component[tuple.prop] = tuple.resolvable.data; });\n\n    // Initiate change detection for the newly created component\n    ref.changeDetectorRef.detectChanges();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'ui-view, [ui-view]',\n  template: `\n    <ng-template #componentTarget></ng-template>\n    <ng-content *ngIf=\"!componentRef\"></ng-content>\n  `\n  // styles: [`\n  //   .done-true {\n  //     text-decoration: line-through;\n  //     color: grey;\n  //   }`\n  // ],\n  // template: `\n  // <div style=\"padding: 1em; border: 1px solid lightgrey;\">\n  //\n  //   <div #content style=\"color: lightgrey; font-size: smaller;\">\n  //     <div>ui-view #{{uiViewData?.id}} created by '{{ parentContext?.name || \"(root)\" }}' state</div>\n  //     <div>name: (absolute) '{{uiViewData?.fqn}}' (contextual) '{{uiViewData?.name}}@{{parentContext?.name}}' </div>\n  //     <div>currently filled by: '{{(uiViewData?.config && uiViewData?.config?.viewDecl?.$context) || 'empty...'}}'</div>\n  //   </div>\n  //\n  // </div>`\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: UIRouter, },\n{type: undefined, decorators: [{ type: Inject, args: [UIView.PARENT_INJECT, ] }, ]},\n{type: ViewContainerRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'componentTarget': [{ type: ViewChild, args: ['componentTarget', {read: ViewContainerRef}, ] },],\n'name': [{ type: Input, args: ['name', ] },],\n'_name': [{ type: Input, args: ['ui-view', ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"
  ]
}